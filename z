t=[{map:"0000000000000000000000000000000000000000000000000000000000000000301111111111111111111111111111111111111111111111111111111",start:[1,5],msg:["RUN WITH ARROW KEYS, TOUCH THE DOOR TO CONTINUE",50,150,"#000"]},{map:"0000000000000000000000000000000000000000000000000000000000000000301110111011111101110111111011101111110111011111121112111",start:[1,5],msg:["PRESS UP TO JUMP",250,150,"#000"]},{map:"0000000000000000000000000000000000011100000000000010000000000001000000000000111001001111110010311111100100111111221221111",start:[1,6],keys:[{taken:0,key:[3,2],off:[[8,9],[9,9]],on:[[6,9],[7,9]]}],msg:["GRAB THE COIN TO MOVE THE PLATFORM",150,50,"#000"]},{map:"0000000000000000000000000000000000000003000000000011011110000000111111000001111111100011111111111111111111111111111111111",start:[1,4],msg:["SOMETIMES ALL YOU NEED TO DO IS SHIFT!",100,50,"#fff"]},{map:"0002000000000010000000401100000011011001100100010011001000100000010001000000100010000001000112200011001111111111111111111",start:[1,7],keys:[{taken:0,key:[7,4],off:[[3,7],[2,7]],on:[[4,7],[5,7]]}]},{map:"1000000000010011111110101000000101010011001010101011010101011010101010000101010011111010100000000100111111111030000000000",start:[3,6],keys:[{taken:0,key:[5,4],off:[[7,3],[8,3]],on:[[6,3],[7,3]]},{taken:0,key:[1,6],off:[[10,1]],on:[[11,1]]}]},{map:"0000000000000001111111000000001011100000010111002210011110111100111101111000111000110001100001100111000111011113221111111",start:[1,2],keys:[{taken:0,key:[9,2],off:[[1,9],[2,9]],on:[[3,9],[4,9]]}],msg:["PRESS SPACE TO RESTART",250,40,"#000"]},{map:"0000010100000000101000010001010000101111000001011110110110111101100101111011001011100110000001111100001110000001111100022",start:[],keys:[]},{map:"0002200000010111100111101111011000000010111100000100000101101100001001000000110011100011100001100111100011001112222112111",start:[],keys:[]},{map:"0000000000000000000000000000000001110110110111101101101100000000011000000000110111111111101110000001000001111111000111111",start:[],keys:[]},{map:"0200002000001000011000010000110000100001100001000011000010010100000100001002001122110010011111111100110000000001110000000",start:[],keys:[]},{map:"0000000000011111100000000000010000000000000111111011111000010000110000000001100000011011000010110110000111111100011111111",start:[],keys:[]},{map:"0010001000110110011001101100110011011001100110110011001101100110011011001100110110011001101100110010011001100101110111011",start:[],keys:[],spikes:1},{map:"0000000000000000000000000000000000000000000000000000000000000000001111000001111110000011111100000111111000001111110000011",start:[],keys:[],spikes:1}],f=.6,k=.8,n=1,o=canvas.getContext`2d`,c=0,v=0,p=0,S=0,g=0,O=0,E=0,h=(R=T=_=s=e=u=d=l=r=0,(e,y)=>(X=~~e,Y=~~y,+m[11*Y+X])),A=(e,y)=>{if(1==h(e,y))return 1;if(4==h(e,y))return 1;if(t[v].keys)for(i in t[v].keys)if(t[v].keys[i].taken){for(j in t[v].keys[i].on)if(E){if(~~e==10-t[v].keys[i].on[j][0]&&~~y==10-t[v].keys[i].on[j][1])return 1}else if(~~e==t[v].keys[i].on[j][0]&&~~y==t[v].keys[i].on[j][1])return 1}else for(j in t[v].keys[i].off)if(E){if(~~e==10-t[v].keys[i].off[j][0]&&~~y==10-t[v].keys[i].off[j][1])return 1}else if(~~e==t[v].keys[i].off[j][0]&&~~y==t[v].keys[i].off[j][1])return 1;return 0},M=(e,y)=>1==h(e,y)?1:4==h(e,y)?1:0,P=e=>{for(i in O=0,x=t[e].start[0]+.3,y=t[e].start[1],vx=0,vy=0,g=0,E=0,p=0,n=1,S=0,m=t[e].map,canvas.style.transform="",t[e].keys)t[e].keys[i].taken=0};P(v),setInterval(()=>{if(canvas.width=canvas.width,o.save(),p>0&&p<10&&(canvas.style.transform="rotate("+3.14*(10-p)/9+"rad)",1==p&&(m=m.split("").reverse().join("").replace(/0/g,"A").replace(/1/g,0).replace(/A/g,1).replace(/3/g,"A").replace(/4/g,3).replace(/A/g,4),canvas.style.transform="",x=10-x+.3,y=10-y,E=1-E,n=1)),S>10||0==S){for(i=0;i<11;i++)for(j=0;j<11;j++)a=m[11*j+i],!E&&1==a||E&&0==a?o.fillRect(64*i,64*j,64,64):2!=a||E?2==a&&E?(o.moveTo(64*i,64*j),o.lineTo(64*i+16,64*j+64),o.lineTo(64*i+32,64*j),o.lineTo(64*i+48,64*j+64),o.lineTo(64*i+64,64*j),o.fill()):!E&&3==a||E&&4==a?(o.fillStyle="#888",o.fillRect(64*i+10,64*j+(E?0:10),44,54),o.fillStyle="#000"):(!E&&4==a||E&&3==a)&&(o.fillRect(64*i,64*j,64,64),o.fillStyle="#888",o.fillRect(64*i+10,64*j+(E?10:0),44,54),o.fillStyle="#000"):(o.moveTo(64*i,64*j+64),o.lineTo(64*i+16,64*j),o.lineTo(64*i+32,64*j+64),o.lineTo(64*i+48,64*j),o.lineTo(64*i+64,64*j+64),o.fill());if(t[v].keys)for(i in o.fillStyle="#aaa",t[v].keys)if(t[v].keys[i].taken)for(j in t[v].keys[i].on)E?o.fillRect(64*(10-t[v].keys[i].on[j][0]),64*(10-t[v].keys[i].on[j][1]),64,64):o.fillRect(64*t[v].keys[i].on[j][0],64*t[v].keys[i].on[j][1],64,64);else for(j in o.beginPath(),E?o.arc(64*(10-t[v].keys[i].key[0])+32,64*(10-t[v].keys[i].key[1])+32,16,0,7):o.arc(64*t[v].keys[i].key[0]+32,64*t[v].keys[i].key[1]+32,16,0,7),o.fill(),o.closePath(),t[v].keys[i].off)E?o.fillRect(64*(10-t[v].keys[i].off[j][0]),64*(10-t[v].keys[i].off[j][1]),64,64):o.fillRect(64*t[v].keys[i].off[j][0],64*t[v].keys[i].off[j][1],64,64);t[v].msg&&(o.font='20px "Comic Sans MS", cursive, sans-serif',o.fillStyle=t[v].msg[3],o.save(),"#fff"==t[v].msg[3]^E&&(o.translate(350,350),o.rotate(3.14),o.translate(-350,-350)),o.fillText(t[v].msg[0],t[v].msg[1],t[v].msg[2]),o.restore())}if(s)0==p&&M(x,y+k)&&M(x+f-.1,y+k)&&(p=20);else if(S)1==--S&&P(++v);else for(i in O&&P(v),r&&!p?vx=.19:l&&!p?vx=-.19:vx=0,g&&u&&c&&(c=1-c,vy=-.32),1-g&&(vy+=.045,vy=Math.min(vy,1)),y+=vy,x+=vx,y+k>11&&(y=10.2,vy=0),y<0&&(y=0,vy=0),x<0&&(x=0),x+f>11&&(x=10.4),(A(x,y)&&A(x+.2,y)||A(x+f,y)&&A(x+f-.2,y))&&(vy=0,y=Math.ceil(y)),vy>=0&&(A(x,y+k)&&A(x+.2,y+k)||A(x+f,y+k)&&A(x+f-.2,y+k))&&(vy=0,y=~~(y+k)-k),(A(x,y)&&A(x,y+.2)||A(x,y+k)&&A(x,y+k-.2))&&(x=Math.ceil(x)),(A(x+f,y)&&A(x+f,y+.2)||A(x+f,y+k)&&A(x+f,y+k-.2))&&(x=~~(x+f)-f),2!=h(x+.3,y+.3)&&2!=h(x+.3,y+k-.3)&&2!=h(x+f-.3,y+.3)&&2!=h(x+f-.3,y+k-.3)||(O=1),(g=10.2==y||A(x,y+k)&&A(x+.2,y+k)||A(x+f-.2,y+k)&&A(x+f,y+k)?1:0)&&3==h(x,y)&&3==h(x+f,y)&&(S=30),t[v].keys)E?!t[v].keys[i].taken&&~~x>=10-t[v].keys[i].key[0]&&~~x<10-t[v].keys[i].key[0]+1&&~~y>=10-t[v].keys[i].key[1]&&~~y<10-t[v].keys[i].key[1]+1&&(t[v].keys[i].taken=1):!t[v].keys[i].taken&&~~x>=t[v].keys[i].key[0]&&~~x<t[v].keys[i].key[0]+1&&~~y>=t[v].keys[i].key[1]&&~~y<t[v].keys[i].key[1]+1&&(t[v].keys[i].taken=1);o.fillStyle="#468",o.save(),o.translate(64*x+19.2,64*y+51.2),o.scale(1,n),o.fillRect(-19.2,0,38.4,-51.2),o.restore(),p&&--p>=10&&(n=-(15-p)/5),S&&S<10&&(o.fillStyle="#000",o.fillRect(0,0,704,704)),askshift=0},33),onkeydown=onkeyup=(e=>{top["lurdlRdTl*urEu*_e**s"[(e.which+3)%20]]=e.type[3]<"u",u||(c=1),_&&P(v)})